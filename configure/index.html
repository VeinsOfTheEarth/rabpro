<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Configuration &mdash; rabpro  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" type="text/css" />
      <link rel="stylesheet" href="../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" type="text/css" />
      <link rel="stylesheet" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Downloading data" href="../examples/notebooks/downloading_data.html" />
    <link rel="prev" title="Installation" href="../install/index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> rabpro
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Setup:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../install/index.html">Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Configuration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#data">Data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#basin-delineation">Basin delineation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#downloading-hydrobasins">Downloading HydroBASINS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#downloading-merit-hydro">Downloading MERIT-Hydro</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#basin-statistics">Basin statistics</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#software">Software</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">Basin statistics</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../examples/notebooks/downloading_data.html">Downloading data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/notebooks/basic_example.html">Basic example</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/notebooks/multiple_basins.html">Multiple basins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/notebooks/basin_stats.html">Basin stats examples</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Miscellanea:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../contributing/index.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../issues/index.html">Issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references/index.html">Citing rabpro</a></li>
<li class="toctree-l1"><a class="reference internal" href="../apiref/index.html">API Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">rabpro</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Configuration</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="configuration">
<span id="configure"></span><h1>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline"></a></h1>
<section id="data">
<h2>Data<a class="headerlink" href="#data" title="Permalink to this headline"></a></h2>
<section id="basin-delineation">
<h3>Basin delineation<a class="headerlink" href="#basin-delineation" title="Permalink to this headline"></a></h3>
<p>To use the rabpro utilities for delineating basins, you’ll need to download MERIT tiles (recommended for small basins or high resolution applications) or HydroBASINS (recommended for very large basins or low resolution applications).</p>
<p>Before initiating either of these downloads, you may want to configure the path where rabpro expects to find this data. rabpro uses the <a class="reference external" href="https://github.com/ActiveState/appdirs">appdirs</a> package to specify a default data location. You can identify the locations where rabpro expects data to exist:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">rabpro</span> <span class="kn">import</span> <span class="n">utils</span>
<span class="n">datapaths</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">get_datapaths</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">datapaths</span><span class="p">[</span><span class="s1">&#39;root&#39;</span><span class="p">])</span> <span class="c1"># Highest-level directory rabpro is looking for</span>
<span class="nb">print</span><span class="p">(</span><span class="n">datapaths</span><span class="p">[</span><span class="s1">&#39;MERIT_root&#39;</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">datapaths</span><span class="p">[</span><span class="s1">&#39;HydroBasins_root&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>If you would like to specify a different <code class="docutils literal notranslate"><span class="pre">root</span></code> location, you may set the <code class="docutils literal notranslate"><span class="pre">RABPRO_DATA</span></code> environment variable in an active python session:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;RABPRO_DATA&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;path/to/rabpro/data&#39;</span>
</pre></div>
</div>
<p>You may also set this environment variable more permanently by adding <code class="docutils literal notranslate"><span class="pre">RABPRO_DATA</span></code> to your operating system’s environment variables, but you may run into issues with your python interpreter not reading the OS environment variables correctly.</p>
<section id="downloading-hydrobasins">
<h4>Downloading HydroBASINS<a class="headerlink" href="#downloading-hydrobasins" title="Permalink to this headline"></a></h4>
<p>There are two ways to get the required HydroBASINS datasets.</p>
<p>First, you may download the data directly from the provider. HydroBASINS was produced by the <a class="reference external" href="https://www.hydrosheds.org/">HydroSheds Organization</a> and is downloadable from their <a class="reference external" href="https://www.hydrosheds.org/products/hydrobasins">HydroBASINS page</a>. You will need to download both the level one and level twelve basin datasets for each continent. You will need to place the data into the paths specified by</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">rabpro</span> <span class="kn">import</span> <span class="n">utils</span>
<span class="n">datapaths</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">get_datapaths</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">datapaths</span><span class="p">[</span><span class="s1">&#39;HydroBasins_1&#39;</span><span class="p">])</span> <span class="c1"># path to place level 1</span>
<span class="nb">print</span><span class="p">(</span><span class="n">datapaths</span><span class="p">[</span><span class="s1">&#39;HydroBasins_12&#39;</span><span class="p">])</span> <span class="c1"># path to place level 12</span>
</pre></div>
</div>
<p>Second, you may use <cite>rabpro</cite> functionality which grabs the necessary HydroBASINS files from a zipped GDrive file and unzips them to their expected location. This can be done via the following python code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">rabpro</span> <span class="kn">import</span> <span class="n">data_utils</span>
<span class="n">data_utils</span><span class="o">.</span><span class="n">download_hydrobasins</span><span class="p">()</span>
</pre></div>
</div>
<p>If <cite>rabpro</cite> cannot automatically fetch this data, it will print the URL of the zipped HydroBASINS file and the directory to which you should unzip this file.</p>
</section>
<section id="downloading-merit-hydro">
<h4>Downloading MERIT-Hydro<a class="headerlink" href="#downloading-merit-hydro" title="Permalink to this headline"></a></h4>
<p>To download MERIT-Hydro, you’ll need to request a username and password on the MERIT-Hydro <a class="reference external" href="http://hydro.iis.u-tokyo.ac.jp/~yamadai/MERIT_Hydro/">homepage</a>.</p>
<p>Unless you want to download the full global extent, you’ll probably need to identify specific MERIT-Hydro “tiles” of interest. You can do this following the logic in the <a class="reference external" href="http://hydro.iis.u-tokyo.ac.jp/~yamadai/MERIT_Hydro/">MERIT Hydro</a> documentation or use the rabpro function <code class="docutils literal notranslate"><span class="pre">rabpro.utils.coords_to_merit_tile</span></code> to obtain a tile identifier (e.g. n30e150) which you can pass to the <code class="docutils literal notranslate"><span class="pre">download_merit_hydro</span></code> function:</p>
</section>
</section>
<section id="basin-statistics">
<h3>Basin statistics<a class="headerlink" href="#basin-statistics" title="Permalink to this headline"></a></h3>
<p>By default, rabpro comes enabled to work with all of the raster assets in the <a class="reference external" href="https://developers.google.com/earth-engine/datasets/">public GEE data catalog</a>. It also is enabled to work with select “user” assets listed below:</p>
<table class="docutils align-center" id="id2">
<caption><span class="caption-text">Datasets included in the user data catalog:</span><a class="headerlink" href="#id2" title="Permalink to this table"></a></caption>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference external" href="https://code.earthengine.google.com/?asset=projects/soilgrids-isric/clay_mean">SoilGrids 250: clay fraction</a></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://code.earthengine.google.com/?asset=projects/soilgrids-isric/silt_mean">SoilGrids 250: silt fraction</a></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://code.earthengine.google.com/?asset=projects/soilgrids-isric/sand_mean">SoilGrids 250: sand fraction</a></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://code.earthengine.google.com/?asset=projects/soilgrids-isric/nitrogen_mean">SoilGrids 250: nitrogen fraction</a></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://code.earthengine.google.com/?asset=projects/soilgrids-isric/soc_mean">SoilGrids 250: mean soil organic carbon</a></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://code.earthengine.google.com/?asset=users/jonschwenk/pelletier2016">Pelletier et al. 2016 Soil Thickness</a></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://code.earthengine.google.com/?asset=users/jstacompute/yang2020">Yang et al. 2020 - Nitrogen deposition</a></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://code.earthengine.google.com/?asset=projects/sat-io/open-datasets/Geomorpho90m/cti">Geomorpho90m: Topography Index</a></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://code.earthengine.google.com/?asset=projects/sat-io/open-datasets/Geomorpho90m/tri">Geomorpho90m: Terrian Ruggedness Index</a></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://code.earthengine.google.com/?asset=projects/sat-io/open-datasets/Geomorpho90m/slope">Geomorpho90m: Slope</a></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://code.earthengine.google.com/?asset=users/jstacompute/FLO1K_qma">FLOW1K qma</a></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://code.earthengine.google.com/?asset=users/rabpro/permafrost_zonation_index">Permafrost Zonation Index (Gruber et al.)</a></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://code.earthengine.google.com/?asset=users/rabpro/Pastick_AK_permafrost_prob">Alaskan permafrost probabilities (Pastick et al.)</a></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://code.earthengine.google.com/?asset=users/rabpro/NIEER_permafrost_probability">Pan-arctic permafrost probabilities (NIEER, Ran et al., 2022)</a></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://code.earthengine.google.com/?asset=users/rabpro/NIEER_mean_annual_ground_temp">Pan-arctic mean annual ground temperature (NIEER, Ran et al., 2022)</a></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://code.earthengine.google.com/?asset=users/rabpro/NIEER_active_layer_thickness">Pan-arctic active layer thickness (NIEER, Ran et al., 2022)</a></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://code.earthengine.google.com/?asset=users/jstacompute/UiO_PEX_PERPROB_5p0_20181128_2000_2016_NH">Northern Hemisphere modeled permafrost probabilities</a></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://code.earthengine.google.com/?asset=users/jonschwenk/glims_glacier_presence_20210914">Glacier presence (GLIMS)</a></p></td>
</tr>
</tbody>
</table>
<p>You can request that a user asset be added to this list by filing an <a class="reference external" href="https://github.com/VeinsOfTheEarth/rabpro/issues/new?assignees=&amp;labels=data+request&amp;template=data-request.yml">issue</a>.</p>
</section>
</section>
<section id="software">
<h2>Software<a class="headerlink" href="#software" title="Permalink to this headline"></a></h2>
<section id="id1">
<h3>Basin statistics<a class="headerlink" href="#id1" title="Permalink to this headline"></a></h3>
<p>To use rabpro utilities for pulling basin statistics from Google
Earth Engine (GEE), you’ll need to sign up for a free GEE account <a class="reference external" href="https://signup.earthengine.google.com/#!/">here</a>. Once you’ve been approved and
installed the GEE Python API (typically installed as a rabpro dependency), you
can use the GEE CLI to obtain a credential token by running <code class="docutils literal notranslate"><span class="pre">earthengine</span>
<span class="pre">authenticate</span></code> and following the instructions. More information can be found at
the <a class="reference external" href="https://developers.google.com/earth-engine/guides/python_install">GEE Python install page</a> and the
<a class="reference external" href="https://developers.google.com/earth-engine/guides/python_install">GEE CLI page</a>.</p>
<p>If you are working with complex or large numbers of watershed basin polygons (or want to
upload your own raster assets), you may be interested in the rabpro utilities for
programmatic GEE asset uploads. These utilities require a writeable Google Cloud
Platform (GCP) bucket as well as installation and authentication for the <code class="docutils literal notranslate"><span class="pre">gsutil</span></code> program. We recommend installing from the Python package as described <a class="reference external" href="https://cloud.google.com/storage/docs/gsutil_install#expandable-2">here</a>.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../install/index.html" class="btn btn-neutral float-left" title="Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../examples/notebooks/downloading_data.html" class="btn btn-neutral float-right" title="Downloading data" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, J. Schwenk, J. Stachelek, T. Zussman, &amp; J. Rowland.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>